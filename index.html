<html>
<head>
<title>ダンメモ ダメージ計算ツール</title>
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8" />
<link rel="icon" href="icon.png" type="image/ico"/>
<link href="css/style.css" rel="stylesheet" type="text/css">
</head>
<body bgcolor=36393F>
<!-- 
ref:<a href=https://forum.gamer.com.tw/Co.php?bsn=31981&sn=21899 target=_blank>【心得】傷害計算方式 - 3/11 </a>
-->
<script>
function changeTarget(){
	var target = document.getElementById("target").value === 'target_counter';
	document.getElementById('power').disabled = target;
	document.getElementById('powerup').disabled = target;
	document.getElementById('affect').disabled = target;
	document.getElementById('affect_count').disabled = target;
	
};
function damageCalculator() {
	var atk,buff,debuff;
	if(document.getElementById("skill_type").value === 'type_p'){
		atk = document.getElementById("atk_p").value || 0;
		buff = document.getElementById("buff_p").value || 0;
		debuff = document.getElementById("debuff_p").value || 0;
	}
	else {
		atk = document.getElementById("atk_m").value || 0;
		buff = document.getElementById("buff_m").value || 0;
		debuff = document.getElementById("debuff_m").value || 0;
	}
	console.log('atk:'+atk);
	console.log('buff:'+buff);
	console.log('debuff:'+debuff);
	//drawTable([["row 1, cell 1", "row 1, cell 2"], ["row 2, cell 1", "row 2, cell 2"]]);
}
function drawTable(tableData) {
	var table = document.getElementById('result_table');
	var tableBody = document.createElement('tbody');
	var random = -4;

	old_tbody = document.getElementById('result_tbody');

	table.style.display = "table";
	tableBody.id = 'result_tbody';


	tableData.forEach(function(rowData) {
		var row = document.createElement('tr');
		var cell = document.createElement('td');
		cell.appendChild(document.createTextNode(random++ + '%'));
		row.appendChild(cell);
		rowData.forEach(function(cellData) {
			var cell = document.createElement('td');
			cell.appendChild(document.createTextNode(cellData));
			row.appendChild(cell);
		});

		tableBody.appendChild(row);
	});

	old_tbody.parentNode.replaceChild(tableBody, old_tbody)
}

</script>

<form name=calcutor>
<ul class="form-style-1">
	<li><label class="field-header">ステータス</label></li>
    <li>
		<ul>
			<label for="atk_p">物攻</label>
			<input type="number" name="atk_p" id="atk_p">
		</ul>
		<ul>
			<label for="atk_m">魔攻</label>
			<input type="number" name="atk_m" id="atk_m">
		</ul>
		<ul>
			<label for="killer">キラー</label>
			<input type="number" name="killer" id="killer">
		</ul>
    </li>
	<li><label class="field-header">スキル</label></li>
    <li>
		<ul>
			<label for="skill_type">タイプ</label>
			<select class="field-select" name="skill_type" id="skill_type">
				<option value="type_p" selected="true" id="skill_type-0">物理</option>
				<option value="type_m" id="skill_type-1">魔法</option>
			</select>
		</ul>
		<ul>
			<label for="target">対象</label>
			<select class="field-select" name="target" id="target" onchange=changeTarget()>
				<option value="target_single" selected="true" id="target-0">単体</option>
				<option value="target_multi" id="target-1">全体</option>
				<option value="target_counter" id="target-2">カウンター</option>
			</select>
		</ul>
		<ul>
			<label for="power">威力</label>
			<select class="field-select" name="power" id="power">
				<option value="power_1" selected="true" id="power-0">弱</option>
				<option value="power_2" id="power-1">中</option>
				<option value="power_3" id="power-2">強</option>
				<option value="power_4" id="power-3">超</option>
				<option value="power_5" id="power-4">超強</option>
			</select>
		</ul>
		<ul>
			<label for="powerup">発動上昇</label>
			<select class="field-select" name="powerup" id="powerup">
				<option value="powerup_1" selected="true" id="powerup-0">無し</option>
				<option value="powerup_2" id="powerup-1">上昇</option>
				<option value="powerup_3" id="powerup-2">大上昇</option>
			</select>
		</ul>
		<ul>
			<label for="affect">効果1つ威力上昇</label>
			<input type="number" style="width:70px;" name="affect" id="affect">
			✕
			<input type="number" style="width:70px;" name="affect_count" id="affect_count">
		</ul>
    </li>
	
	<li><label class="field-header">攻撃イベント</label></li>
	<li>
		<ul>
			<label for="combo">必殺Combo</label>
			<select class="field-select" name="combo" id="combo">
				<option value="combo_0" selected="true" id="combo-0">無し</option>
				<option value="combo_1" id="combo-1">1</option>
				<option value="combo_2" id="combo-2">2</option>
				<option value="combo_3" id="combo-1">3</option>
				<option value="combo_4" id="combo-2">4</option>
			</select>
		</ul>
		<input name="atk_event[]" id="atk_event-0" value="atk_event_crit" type="checkbox">
		<label for="atk_event-0">クリティカル</label>
		<input name="atk_event[]" id="atk_event-1" value="atk_event_pene" type="checkbox">
		<label for="atk_event-1">ペネトレーション</label>
		<input name="atk_event[]" id="atk_event-2" value="atk_event_guard" type="checkbox">
		<label for="atk_event-2">ガード</label>
    </li>
	<li><label class="field-header">バフ</label></li>
    <li>
		<ul>
			<label for="buff_p">力バフ</label>
			<input type="number" name="buff_p" id="buff_p">
		</ul>
		<ul>
			<label for="buff_m">魔バフ</label>
			<input type="number" name="buff_m" id="buff_m">
		</ul>
		<ul>
			<label for="buff_e">属性ダメ</label>
			<input type="number" name="buff_e" id="buff_e">
		</ul>
		<ul>
			<label for="buff_fe">ファミリア属性ダメ</label>
			<input type="number" name="buff_fe" id="buff_fe">
		</ul>
    </li>
	<li><label class="field-header">デバフ</label></li>
    <li>
		<ul>
			<label for="debuff_p">物理耐性</label>
			<input type="number" name="debuff_p" id="debuff_p">
		</ul>
		<ul>
			<label for="debuff_m">魔法耐性</label>
			<input type="number" name="debuff_m" id="debuff_m">
		</ul>
		<ul>
			<label for="debuff_e">属性耐性</label>
			<input type="number" name="debuff_e" id="debuff_e">
		</ul>
		<ul>
			<label for="debuff_st">単体被ダメ</label>
			<input type="number" name="debuff_st" id="debuff_st">
		</ul>
		<ul>
			<label for="debuff_sm">全体被ダメ</label>
			<input type="number" name="debuff_sm" id="debuff_sm">
		</ul>
    </li>
	<li><label class="field-header">発展アビリティ</label></li>
    <li>
		<ul>
			<label for="ability_pene">ペネX％ダメ上昇</label>
			<input type="number" name="ability_pene" id="ability_pene">
		</ul>
		<ul>
			<label for="ability_crit">クリX％ダメ上昇</label>
			<input type="number" name="ability_crit" id="ability_crit">
		</ul>
    </li>
	<li><label class="field-header">装備革新</label></li>
    <li>
		<ul>
			<label for="reform_pene">ペネX％ダメ上昇</label>
			<input type="number" name="reform_pene" id="reform_pene">
		</ul>
		<ul>
			<label for="reform_crit">クリX％ダメ上昇</label>
			<input type="number" name="reform_crit" id="reform_crit">
		</ul>
    </li>
	<li><label class="field-header">敵ステータス</label></li>
    <li>
		<ul>
			<label for="enemy_def">防御</label>
			<input type="number" name="enemy_def" id="enemy_def" value="100">
		</ul>
		<ul>
			<label for="enemy_def_debuff">耐久デバフ</label>
			<input type="number" name="enemy_def_debuff" id="enemy_def_debuff">
		</ul>
    </li>
	<li><label class="field-header">その他</label></li>
	<li>
		<ul>
		<input name="specila_event[]" id="specila_event-0" value="specila_event_0" type="checkbox">
		<label for="specila_event-0">三年目バレンタインデー以降キャラ</label>
		</ul>
    </li>
    <li class="field-submit">
        <input type="button" value="計算" onclick=damageCalculator() />
    </li>
</ul>
</form>
<table id="result_table" style="display:none">
	
    <thead>
		<tr>
            <th >ランダム</th>
            <th >-</th>
            <th >クリ</th>
            <th >ペネ</th>
            <th >クリペネ</th>
        </tr>
    </thead>
    <tbody id="result_tbody">
    </tbody>
</table>
</body>
</html>

